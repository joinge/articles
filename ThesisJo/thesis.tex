
 
\documentclass[
   uiophd
 , floatrow
 , xelatex
 , glossary                                     % Use a glossary
 , biblatex                                 % Use a bibliography
]{common/mytemplate}

\hypersetup{
   bookmarksopen=true
 , bookmarksopenlevel=2
}

% \usepackage[utf8]{inputenc}         % or whatever you use

\title{My title}
\author{My name}


\newcommand*\1{\vec 1}
\renewcommand*\a{\vec a}
\renewcommand*\b{\vec b}
\newcommand*\eR{\mat{\hat R}}
\newcommand*\eRi{\hat{\mat R}\;\!^{-1}}
\renewcommand\k{\vec k}
\newcommand*\n{\vec n}
\newcommand\p{\vec p}
\newcommand*\R{\mat R}
\newcommand*\Ri{\R^{-1}}
\newcommand*\s{\vec s}
\newcommand\ux{\hat{\boldsymbol{x}}}
\newcommand\uy{\hat{\boldsymbol{y}}}
\newcommand\uz{\hat{\boldsymbol{z}}}
\renewcommand\v{\vec v}
\newcommand\x{\vec x}
\newcommand\X{\mat X}
\newcommand\w{\vec w}

\newcommand\argmin[1]{\underset{#1}{\text{argmin}}\ }
\newcommand\norm[1]{\left\lVert #1 \right\rVert}
% \newcommand\min[1]{\underset{#1}{\text{min}}}


\usepackage{floatrow}

\input{glossary}
\makeglossaries

\addbibresource{references.bib}


\begin{document}
\frontmatter
\maketitle
\tableofcontents

\mainmatter

\printglossary

\newpage
\input{introduction}

\newpage
\input{background}

\newpage
\input{litterature_review}

\newpage
\input{derivations}

\newpage
\addcontentsline{toc}{chapter}{List of Tables}
\listoftables

\newpage
\addcontentsline{toc}{chapter}{List of Figures}
\listoffigures

\newpage
\printbibliography
    
\end{document}

% 
% 
% 
% %\documentclass[11pt,a4paper]{book}
% \documentclass[10pt,b5paper,twoside]{book}
% 
% % Line spacing
% %\linespread{1.0}
% 
% % Include document setup script
% \include{documentproperties}
% 
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% % TITLE PAGE
% \author{Jo Inge Buskenes}
% \title{Some title
% \vspace{0.5cm}}
% \department{Department of Circulation and Medical Imaging}
% 
% \usepackage{color}
% \newcommand\todo[1]{{\textit{\color{red}(#1)}}}
% 
% % from Paper 1
% \usepackage{colortbl}
% \usepackage{appendix}
% 
% % from Paper 3
% \usepackage{epstopdf}
% 
% % from spie.tex (Paper 4)
% \usepackage{array}
% 
% % from hos (Paper 5)
% \usepackage{url}
% %\usepackage{epsfig}
% 
% % symbol list
% \usepackage{nomencl}
% \makenomenclature
% \renewcommand{\nomname}{Symbols and Abbreviations}
% \newcommand*{\nom}[2]{#1\nomenclature{#1}{#2}}
% \newcommand*{\nomi}[2]{\nomenclature{#1}{#2}}
% 
% % custom commands
% \newcommand{\mat}[1]{\mathbf{#1}}
% \renewcommand{\vec}[1]{\mathbf{#1}}
% \newcommand{\degree}{\ensuremath{^\circ}}
% \newcommand{\R}{$\mat{\hat{R}}$ }
% 
% \begin{document}
% 
% \date{\today}
% \pagestyle{empty} \maketitle
% 
% %Norw.  sammendrag
% % Norsk sammendrag
% %\Chapter*{}
% \newpage%
% 
% %\setcounter{page}{1}
% \renewcommand{\thepage}{\roman{page}}% Roman numerals for page counter
% 
% ~\\
% \vspace{10.0cm}
% ~\\
% {\bf NTNU}
% \\
% Norwegian University of Science and Technology\\
% \\
% Thesis for the degree of Philosophiae Doctor\\
% \\
% Faculty of Medicine\\
% Department of Circulation and Medical Imaging\\
% \\
% \copyright\,Jon Petter \AA{}sen\\
% \\
% ISBN XXX-XX-XXX-XXXX-X (printed version)\\
% ISBN XXX-XX-XXX-XXXX-X (electronic version)\\
% ISSN XX-XX\\
% \\
% Doctoral theses at NTNU, 2014:XX\\
% \\
% Printed by NTNU-trykk
% 
% ~\\
% \newpage
% %\thispagestyle{empty}%
% ~\\%
% ~\\%
% ~\\
% \noindent\large 
% \textbf{Akselerering av adaptive algoritmer for ultralydavbildning ved hjelp av programmerbare grafikkprosessorer}
% %\vspace{0.2cm}\\%
% \\\\%
% \normalsize
% 
% 
% 
% En rivende utvikling innen spillteknologi og tilh\o{}rende programmeringsspr\aa{}k har nylig gjort superdatamaskiner i form av et lite programmerbart grafikkort (GPU) tilgjengelige for forskere. Denne utrolige \o{}kningen i beregningskraft og forbedret programmerbarhet er for \o{}yeblikket med p\aa{} \aa{} endre hvordan ultralydsystemer designes. N\aa{}r forskere utforsker nye algoritmer for ultralydavbildning er det derfor viktig at arkitekturen til parallelle akseleratorer, som en GPU er et eksempel p\aa{}, tas h\o{}yde for. Hvis en ny, kompleks algoritme er tenkt til \aa{} kj\o{}res i sanntid, er det viktig at den kan tilpasses den programmerbare og parallelle prosesseringskjeden i moderne ultralydskannere. 
% 
% M\aa{}let med denne studien har v\ae{}rt \aa{} utforske hvordan GPUer kan utnyttes til avansert prosessering i et avbildende ultralydsystem. Blant de problemene vi har sett n\ae{}rmere p\aa{} finner man b\aa{}de adaptiv str\aa{}leforming, adaptiv visualisering av volumetrisk ultralyd og ultralydsimuleringer. Felles for disse problemene er at de alle krever parallelprogrammering for at sanntidsprosessering skal oppn\aa{}s.
% 
% I f\o{}rste del av avhandlingen utforskes Capon's adaptive str\aa{}leformings-metode. Metoden implementeres p\aa{} en GPU  for \aa{} muliggj\o{}re sanntidsprosessering for avbildende sonar (\textbf{Artikkel\,I}) og medisinsk ultralydavbildning (\textbf{Artikkel\,II}). Sanntidsprosessering oppn\aa{}s for begge modaliteter. \textbf{Artikkel\,II} presenterer ogs\aa{}, for f\o{}rste gang, videoer hvor b\aa{}de simulerte og \textit{in vivo} medisinsk ultralyddata er prosessert med Capon-str\aa{}leforming. I \textbf{Artikkel\,III} viser vi at Capon-str\aa{}leformeren ikke har skift-invariant oppf\o{}rsel n\aa{}r den anvendes til sanntidsavbildning. Videre foresl\aa{}s det en metode som gir mer shift-invariant avbildning. Skift-invariant avbildning er avgj\o{}rende for at metoden skal kunne tas ibruk i praktisk.
% 
% I \textbf{Artikkel\,IV} foresl\aa{}r vi en adaptiv metode for visualisering av volumetriske ultralydbilder av hjertet. Metoden undertrykker st\o{}y som med konvensjonelle metoder hadde skygget for hjertevev. Dette arbeidet viser ogs\aa{} at det med moderne GPUer er mulig \aa{} utf\o{}re avansert visualisering i et ultralydsystem og fortsatt ha sanntidsytelse. 
% 
% I siste del av avhandlingen utforsker vi hvordan GPUer kan utnyttes til \aa{} akselerere ultralydsimuleringer. Resultatet av dette arbeidet ble et simuleringsprogram hvor geometrien til et gitt ultralydarray kan interaktivt tegnes, og hvor det resulterende trykkfeltet simuleres i sanntid.
% 
% \vspace{0.3cm}
% \noindent Jon Petter Helgesen \AA{}sen\\
% Institutt for sirkulasjon og bildediagnostikk, NTNU\\
% Hovedveileder: Sverre Holm\\ 
% Biveiledere: Stein-Inge Rabben, Erik Steen and Hans Torp\\
% Finansieringskilde: MI-Lab
% 
% \vspace{0.2cm}
% \noindent \emph{Ovennevnte avhandling er funnet verdig til \aa{} forsvares offentlig for graden Philosophiae Doctor (Ph.D.) i medisinsk teknologi. Disputas finner sted ... .}
% 
% % ENGLISH ABSTRACT / SUMMARY
% \CustChapter*{Abstract}
% \addcontentsline{toc}{chapter}{Abstract}
% A rapid development in computer game technology and accompanying programming languages have recently provided researchers with small personal supercomputers, comprised in a single graphics card (GPU). This immense rise in computational capabilities and improved programmability are currently changing how ultrasound imaging systems are designed. When researchers are exploring new algorithms for ultrasound imaging, it is therefore important to keep the architecture of parallel accelerators like the GPU in mind. If a new complex algorithm is supposed to run in real time, it needs to fit the programmable and parallel pipeline of modern ultrasound scanners.
% 
% The aim of this study has been to investigate the possibility of utilizing GPUs for advanced processing in an ultrasound imaging system. Among the investigated problems are both adaptive beamforming, adaptive visualization of ultrasound volumes, and ultrasound simulations. The presented problems have in common that they require parallel programming in order to reach real-time processing. 
% 
% In the first part of the thesis, the Capon adaptive beamformer is investigated and implemented on a GPU for the application of real-time sonar (\textbf{Paper\,I}) and medical ultrasound imaging (\textbf{Paper\,II}). Real-time frame rates are achieved for both modalities. \textbf{Paper\,II} also present, for the first time, videos where the Capon beamformer has been applied on loops of simulated and \textit{in vivo} medical ultrasound images. In \textbf{Paper\,III}, we show that Capon beamforming does not provide shift-invariant imaging in a real-time imaging setting. A method is then proposed that improves the shift-invariant property. Shift-invariant imaging is essential if the method is ever to be used in practice.
% 
% In paper \textbf{Paper\,IV} we propose an adaptive method for visualization of volumetric cardiac ultrasound images. The method is capable of removing noise that by conventional methods would have occlude cardiac tissue. This work also shows that with modern GPUs it is possible to add advanced visualization methods to an ultrasound imaging system and still have real-time performance.
% 
% Finally, we investigate how GPUs can be utilized to accelerate ultrasound simulations (\textbf{Paper\,V}). The result of this work was a simulation program where ultrasound array geometries can be interactively drawn and where the resulting pressure field is simulated and visualized in real time.
% 
% %\setcounter{page}{3} %I don't want the norwegian summary to be counted in. (This will change page numbering since the delivered version)
% 
% 
% % PREFACE AND ACKNOWLEDGEMENTS
% \CustChapter*{Preface}%
% \addcontentsline{toc}{chapter}{Preface}
% %\thispagestyle{empty}%
% This thesis is submitted in partial fulfillment of the requirements for the degree of \textit{Philosophiae Doctor} (Ph.D.) at the Faculty of Medicine at the Norwegian University of Science and Technology (NTNU). The research was funded by \textit{Medical Imaging Laboratory} (MI-Lab), and was carried out at the Department of Circulation and Medical Imaging. The main supervisor has been Professor Sverre Holm in the Department of Informatics, University of Oslo (UiO), and Professor II at MI-Lab, NTNU. Co-supervisors have been Ph.D. Stein Inge Rabben, Ph.D. Erik Steen, both at GE Vingmed Ultrasound AS, and Professor Hans Torp in the Department of Circulation and Medical Imaging, NTNU.
% 
% 
% \subsubsection{Acknowledgments}
% First of all I would like to thank my main supervisor Sverre Holm and the rest of my team of supervisors for all the help and guidance through the Ph.D. project. Andreas Austeng also deserves a big thank you for all valuable help and for showing so much interest in my work. Thank you to all my co-authors for their contributions. I also want to thank the Faculty of Medicine, MI-Lab and the Department of Circulation and Medical Imaging, NTNU for believing in me and making it possible to conduct this work.
% 
% During these years I have had the great pleasure of working with and getting to know several research communities and companies. I therefore would like to thank all colleagues at the Department of Circulation and Medical Imaging, NTNU, the Department of Informatics, UiO, GE Vingmed Ultrasound AS, and Squarehead Technology AS for providing great working environments. A special thanks goes to all my fellow Ph.D. students at MI-Lab. I will never forget our conference trips. A special thanks also goes to Jo Inge Buskenes at "office" 4470 for making every working hour so much fun.
% 
% Ines Hafizovic and Carl-Inge Colombo Nilsen have used their spare time to review this thesis, for which I am very grateful.  
% 
% Finally I would like to thank my family and all my friends for their support, and for providing a world away from work. But most of all, I want to thank Beate for her love and patient. Without your support I would never have managed to complete this thesis.
% \null
% \vfill
% \hfill Dedicated to Sofie Mathilde \AA{}sen
% \CustChapter*{List of publications}
% \addcontentsline{toc}{chapter}{List of publications}
% 
% This thesis is based on the following five papers, referred to in the text by their Roman numerals (I-V): 
% \begin{enumerate}[I]
% \renewcommand\labelenumi{\bfseries\theenumi}
% 	\item J.\:I.\:Buskenes, \textbf{J.\:P.\:\AA{}sen}, C.-I.\:C.\:Nilsen and A.\:Austeng, "An optimized GPU implementation of the MVDR beamformer for active sonar imaging", {\it  IEEE Transactions on Oceanic Engineering, accepted for publication}.
% 	\item \textbf{J.\:P.\:\AA{}sen}, J.\:I.\:Buskenes, C.-I.\:C.\:Nilsen, A.\:Austeng and S.\:Holm, "Implementing Capon beamforming on a GPU for real-time cardiac ultrasound imaging", {\it IEEE Transactions on Ultrasonics, Ferroelectrics, and Frequency Control, vol. 61, no. 1, pp. 76-85, Jan 2014}.
%  	\item \textbf{J.\:P.\:\AA{}sen}, A.\:Austeng and S.\:Holm, "Capon beamforming and moving objects - An analysis of lateral shift-invariance", {\it IEEE Transactions on Ultrasonics, Ferroelectrics, and Frequency Control, accepted for publication}.
% 	\item \textbf{J.\:P.\:\AA{}sen}, E.\:Steen, G.\:Kiss, A.\:Thorstensen and S.\:I.\:Rabben, "Adaptive volume rendering of cardiac 3D ultrasound images - utilizing blood pool statistics", {\it Proc. SPIE Medical Imaging 2012, vol. 8320, pp. 832008}.
% 	\item \textbf{J.\:P.\:\AA{}sen} and S.\:Holm, "Huygens on speed: Interactive simulation of ultrasound pressure fields", {\it Proc. IEEE Ultrasonics Symposium 2012, pp. 1643-1646}.
% \end{enumerate}  
% 
% \CustChapter*{Related publications}
% \addcontentsline{toc}{chapter}{Related publications}
% The following papers are related to the included papers, and are referred to in the text by their Roman numerals: 
% 
% \begin{enumerate}[VI]
% \setcounter{enumi}{5}
% \renewcommand\labelenumi{\bfseries\theenumi}
% 
% 	\item \textbf{J.\:P.\:\AA{}sen}, J.\:I.\:Buskenes, C.-I.\:C.\:Nilsen, A.\:Austeng and S.\:Holm, "Implementing Capon Beamforming on the GPU for Real-Time Cardiac Ultrasound Imaging", {\it Proc. IEEE Ultrasonics Symposium 2012, pp. 2133-2136}.
% 
% 	\item J.\:I.\:Buskenes, \textbf{J.\:P.\:\AA{}sen}, C.-I.\:C.\:Nilsen and A.\:Austeng, "Adapting the Minimum variance beamformer to a graphics processing unit for active sonar imaging systems", {\it Proc. Meetings on Acoustics 2013, vol. 13}. \textit{Invited talk}.
% 	
% 	\item G.\:Kiss, E.\:Steen, \textbf{J.\:P.\:\AA{}sen} and H.\:Torp, "GPU volume rendering in 3D echocardiography: real-time pre-processing and ray-casting", {\it Proc. IEEE Ultrasonics Symposium 2010, pp. 193-196}.
% 
% 	%\item G. Kiss, \textbf{J. P. \AA{}sen}, J. Bogaert, B. H. Amundsen, P. Claus, J. R. M. D'hooge and H. Torp, "Multi-modal cardiac image fusion and visualization on the GPU", {\it Proc. IEEE Ultrasonics Symposium 2011}.
% 
% 	\item E.\:S.\:Br\o{}nstad, \textbf{J.\:P.\:\AA{}sen}, H.\:Torp and G.\:Kiss, "Visibility driven visualization of 3D cardiac ultrasound data on the GPU", {\it Proc. IEEE Ultrasonics Symposium 2012, pp. 2651-2654}.
% \end{enumerate}
% 
% \newpage\thispagestyle{empty}
% \pagestyle{fancy}
% 
% %
% 
% \cleardoublepage
% \addcontentsline{toc}{chapter}{Contents}
% \renewcommand*\contentsname{Contents}
% \tableofcontents
% 
% \cleardoublepage
% \addcontentsline{toc}{chapter}{Symbols and Abbreviations}
% \printnomenclature
% 
% \cleardoublepage
% \setcounter{page}{1}
% \renewcommand{\thepage}{\arabic{page}}
% 
% %\renewcommand*\thesection{\arabic{section}}
% 
% %%%% CHAPTER 2 %%%%
% \begin{bibunit}[IEEEtran]
% \CustChapter{Background}
% \runningtitle{Background}
% \input{./Background/background}
% \newpage\addcontentsline{toc}{section}{References}
% \putbib[./Background/background]
% \end{bibunit}
% 
% %\setcounter{section}{0}
% %\setcounter{chapter}{1}
% 
% %%%% CHAPTER 1 %%%%
% \CustChapter{Introduction} 
% \runningtitle{Introduction}
% \input{./Introduction/introduction}
% 
% \setcounter{chapter}{0}
% 
% %%%% Paper 1 %%%%
% \begin{bibunit}[IEEEtran]
% \CustChapterPaper{An Optimized GPU Implementation of the MVDR Beamformer for Active Sonar Imaging}
% \runningtitle{GPU MVDR Beamformer for Active Sonar Imaging}
% \authors{
% 	Jo Inge Buskenes$^{1}$, 
%     	\textbf{Jon Petter \AA{}sen}$^{2}$, 
%     	Carl-Inge C. Nilsen$^{1}$ and
%     	Andreas Austeng$^{1}$
% } 
% {
% 	$^{1}$Department of Informatics, University of Oslo, Oslo, Norway\\
%     	$^{2}$Medical Imaging Lab (MI-Lab), Norwegian University of Science and Technology, Trondheim, Norway
% }
% \noindent \textit{IEEE Transactions on Oceanic Engineering, accepted for publication}.
% \newpage
% {
% \input{./Paper1/howto_howto_capon}
% }
% \newpage\addcontentsline{toc}{section}{References}
% \putbib[./Paper1/library]
% \end{bibunit}
% 
% \setcounter{chapter}{1}
% 
% %%%% Paper 2 %%%%
% \begin{bibunit}[IEEEtran]
% \CustChapterPaper{Implementing Capon Beamforming on a GPU for Real-Time Cardiac Ultrasound Imaging}
% \runningtitle{GPU Capon Beamformer for Cardiac Ultrasound Imaging}
% \authors{
% 	\textbf{Jon Petter \AA{}sen}$^{1}$,
%     	Jo Inge Buskenes$^{2}$,  
%     	Carl-Inge C. Nilsen$^{2}$,
%     	Andreas Austeng$^{2}$ and
%     	Sverre Holm$^{1,2}$
% } 
% {
% 	$^{1}$Medical Imaging Lab (MI-Lab), Norwegian University of Science and Technology, Trondheim, Norway\\
%     	$^{2}$Department of Informatics, University of Oslo, Oslo, Norway
% }
% \noindent \textit{IEEE Transactions on Ultrasonics, Ferroelectrics, and Frequency Control, vol. 61, pp. 76-85, Jan 2014}.
% \newpage
% {\input{./Paper2/cos}}
% \newpage
% \addcontentsline{toc}{section}{References}
% \putbib[./Paper2/cosbib]
% \end{bibunit}
% 
% 
% %%%% Paper 3 %%%%
% \begin{bibunit}[IEEEtran]
% \CustChapterPaper{Capon Beamforming and Moving Objects - An Analysis of Lateral Shift-Invariance}
% \runningtitle{Capon Beamforming and Moving Objects}
% \authors{
% 	\textbf{Jon Petter \AA{}sen}$^{1}$, 
%     	Andreas Austeng$^{2}$ and
%     	Sverre Holm$^{1,2}$
% } 
% {
% 	$^{1}$Medical Imaging Lab (MI-Lab), Norwegian University of Science and Technology, Trondheim, Norway\\
%     	$^{2}$Department of Informatics, University of Oslo, Oslo, Norway
% }
% \noindent \textit{IEEE Transactions on Ultrasonics, Ferroelectrics, and Frequency Control, accepted for publication}.
% \newpage\input{./Paper3/moving_obj}
% \newpage\addcontentsline{toc}{section}{References}
% \putbib[./Paper3/moving_objbib]
% \end{bibunit}
% 
% 
% %%%% Paper 4 %%%%
% \begin{bibunit}[IEEEtran]
% \CustChapterPaper{Adaptive Volume Rendering of Cardiac 3D Ultrasound Images - Utilizing Blood Pool Statistics}
% \runningtitle{Adaptive Volume Rendering of Cardiac Ultrasound}
% \authors{
% 	\textbf{Jon Petter \AA{}sen}$^{1}$,
% 	Erik Steen$^2$,
% 	Gabriel Kiss$^{3,4}$,
% 	Anders Thorstensen$^{1,5}$,
% 	Stein Inge Rabben$^2$
% }
% {
% $^{1}$Medical Imaging Lab (MI-Lab), Norwegian University of Science and Technology, Trondheim, Norway\\
% $^{2}$ GE Vingmed Ultrasound, Horten, Norway\\
% $^{3}$ Norwegian University of Science and Technology, ISB - Department of Circulation and Medical Imaging, Trondheim, Norway\\
% $^{4}$ St. Olavs Hospital, Trondheim, Norway\\
% $^{5}$ Department of Cardiology, St. Olavs Hospital, Trondheim, Norway
% }
% \noindent \textit{Proc. SPIE Medical Imaging 2012, vol. 8320, pp. 832008.}
% \newpage\input{./Paper4/spie}
% \newpage\addcontentsline{toc}{section}{References}
% \putbib[./Paper4/spiebib]
% \end{bibunit}
% 
% %%%% Paper 5 %%%%
% \begin{bibunit}[IEEEtran]
% \CustChapterPaper{Huygens on Speed: Interactive Simulation of Ultrasound Pressure Fields}
% \runningtitle{Huygens on speed}
% \authors{\textbf{Jon Petter \AA{}sen}$^1$ and Sverre Holm$^{1,2}$}
% {
% 	$^{1}$Medical Imaging Lab (MI-Lab), Norwegian University of Science and Technology, Trondheim, Norway\\
%     	$^{2}$Department of Informatics, University of Oslo, Oslo, Norway
% }
% \noindent \textit{Proc. IEEE Ultrasonics Symposium 2012, pp. 1643-1646}.
% \newpage\input{./Paper5/hos}
% \newpage\addcontentsline{toc}{section}{References}
% \putbib[./Paper5/hosbib]
% \end{bibunit}
% 
% %\appendix
% 
% \end{document}
