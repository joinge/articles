\documentclass[
    beamer                                       % Document type (non-standard)
%  , handout
%  , xelatex                                      % Use the XeLaTeX compiler
%  , movie
]{common/mytemplate}

\pdfpageattr {/Group << /S /Transparency /I true /CS /DeviceRGB>>}

% \mode<handout>{\setbeamercolor{background canvas}{bg=black!5}}

\usepackage{template/beamerthemeUiO}
% \usepackage{common/oxygentheme}
% \setbeameroption{show only notes}
% \setbeameroption{notes on second screen=left}

% \newcommand\remotesource{http://www.joinge.net/compet}

\title{GPU-based Adaptive Beamforming for Active Sonar Imaging}
\subtitle{}
\author[]{\textbf{Jo Inge Buskenes}$^{\text{a}}$, Jon Petter Åsen$^{\text{b}}$, Andreas~Austeng$^{\text{a}}$, Carl-Inge~Colombo~Nilsen$^{\text{a}}$}
\date[Jo Inge Buskenes at EQUA, Edinburgh, July\ 2012]{Edinburgh, Scotland, July 2012}
\institute[Dept.\ of Informatics, University of Oslo]{\bf$^{\text{a}}$Department of Informatics, University of Oslo\\
                                                      \bf$^{\text{b}}$MI-Lab, Norwegian University of Science and Technology}
% \date{Sist revidert: 27.01.2009}

\definecolor{LightBlue}{rgb}{0.3,0.3,1}
\definecolor{DarkBlue}{rgb}{0.2,0.2,0.7}
\setbeamercolor{block title}{bg=DarkBlue,fg=white}%bg=background, fg= foreground
\setbeamercolor{block body}{bg=gray!20,fg=black}%bg=background, fg= foreground
\setbeamertemplate{blocks}[rounded]

\RequirePackage[latin1]{inputenc}%              % Set input encoding (optionally latin1) utf8
\RequirePackage[T1]{fontenc}%                 % Set font encoding

\begin{document}

% \frame{\titlepage}
% \begin{frame}
%   \frametitle{}
% 
%   \begin{center}
%   \newcommand\titleSpace{0.05cm}
% 
%   {\Large A Data Dependent Beamformer}\\[\titleSpace]
%   {\small for}\\[\titleSpace]
%   {\Large Active Sonar Imaging}
% 
% %   \graphicsAI[width=\linewidth]{../software/user-apps/web/images/top.png}
% 
%   \begin{minipage}{0.4\linewidth}\centering
%   Jo Inge Buskenes\\
%   20.08.2010
%   \end{minipage}%
%   \begin{minipage}{0.2\linewidth}\centering
%   \graphicsAI[width=\linewidth]{gfx/uioLogo.eps}
%   \end{minipage}%
%   \begin{minipage}{0.4\linewidth}\centering
%   University of Oslo\\Faculty of Mathematics and Natural Sciences
%   \end{minipage}%
%   \end{center}
% \end{frame}

\begin{frame}
\vspace*{2\baselineskip}
  \titlepage
\end{frame}
\note{\null{}}

% \AtBeginSection[]
% {
%   \frame<handout:0>
%   {
%     \frametitle{Agenda}
%     \tableofcontents %[currentsection,hideallsubsections]
%   }
% }

% \AtBeginSubsection[]
% {
%   \frame<handout:0>
%   {
%     \frametitle{Agenda}
%     \tableofcontents[sectionstyle=show/hide,subsectionstyle=show/shaded/hide]
%   }
% }

\newcommand<>{\highlighton}[1]{%
  \alt#2{\structure{#1}}{{#1}}
}

\newcommand{\icon}[1]{\pgfimage[height=1em]{#1}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%% Content starts here %%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{
\renewcommand{\frametitle}[2]{{\vspace*{10pt}\bf\Large #1\par}}
\begin{frame}
\frametitle{Context}
\framesubtitle{Active Sonar}
\vspace{-25pt}
\begin{figure}[H]
\begin{narrow}{-0.5cm}{0pt}
\hspace{-10pt}\graphicsAI<1>[drawing,width=1.05\linewidth]{gfx/SonarPrinciple.svg}
\end{narrow}
\end{figure}
% \begin{itemize}
% \item Each pixel value is estimated by focusing the receiver on that point.
% \end{itemize}
\end{frame}

\begin{frame}
\frametitle{Context}
\framesubtitle{Imaging techniques}
\vspace{-10pt}
\begin{figure}[H]
\begin{narrow}{-0.5cm}{0pt}
\hspace{-10pt}\graphicsAI<1>[drawing,width=1.05\linewidth]{gfx/imaging_concepts.png}
\end{narrow}
\end{figure}
A phased array can be used in several imaging modes:
\begin{itemize}
\item \emph{Sector scan}: Image computed from a single ping
\item \emph{Sidescan}: Image created by stacking images from several subsequent pings
\item \emph{Synthetic aperture sonar}: Image computed from overlapping pings
\end{itemize}
% \begin{block}{Proposed method: Generic, can be used in all modes}
% \vspace{-25pt}
% \end{block}
\end{frame}
}

\section*{}
\begin{frame}
  \frametitle{Agenda}
  \tableofcontents%[%section=1,
                   %hidesubsections]
\end{frame}

\renewcommand{\frametitle}[2]{{\vspace*{10pt}\bf\Large #1\par}}



% \begin{frame}
% \frametitle{Acknowledgements}
% \framesubtitle{}
% \vspace{-3pt}
% \begin{itemize}
% \item Kongsberg Maritime.
% \item FFI guys.
% \end{itemize}
% \end{frame}

% General system, may be applied to several different datasets

\section{Introduction}

% \subsection{Active sonar imaging}
\begin{frame}
\frametitle{Active Sonar Imaging}
\framesubtitle{Basic Principle}
\vspace{-25pt}
\begin{figure}[H]
\begin{narrow}{-0.5cm}{0pt}
\hspace{-10pt}\graphicsAI<1>[drawing,width=1.05\linewidth]{gfx/SonarPrinciple.svg}
\end{narrow}
\end{figure}
% \begin{itemize}
% \item Each pixel value is estimated by focusing the receiver on that point.
% \end{itemize}
\end{frame}

\subsection{Beamforming - Basic concept}

\begin{frame}
\frametitle{Beamforming}
\framesubtitle{The Delay-and-Sum (DAS) beamformer}
\vspace{5pt}
\begin{figure}[H]
\begin{narrow}{-0.9cm}{-0.9cm}
\graphicsAI<1>[drawing,width=\linewidth]{gfx/beamforming_das.svg} %{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}
\vspace{-10pt}
\begin{itemize}
\item For each pixel coordinate: Delays and weights are applied to each channel prior to summation.
\item \emph{Delays} $\Rightarrow$ Allow signals from the pixel location to sum constructively, and noise and interference to sum destructively.
\item \emph{Weights} $\Rightarrow$ Allow us to trade resolution for SNR. 
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Example case}
\framesubtitle{What determines a beamformer's ability to suppress interference?}
\vspace{-15pt}
\begin{figure}[H]
\begin{narrow}{-1cm}{-1cm}
\graphicsAI<1>[drawing,width=\linewidth]{gfx/scenario_interference.svg} %{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}
\end{frame}


\begin{frame}
\frametitle{Example case}
\framesubtitle{The Delay-and-Sum (DAS) beamformer}
\vspace{-15pt}
\begin{figure}[H]
\begin{narrow}{-1cm}{-1cm}
\graphicsAI<1>[width=\linewidth]{gfx/scenario_das.svg} %{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}
\end{frame}


\begin{frame}
\frametitle{Example case}
\framesubtitle{The Minimum Variance beamformer}
\vspace{-15pt}
\begin{figure}[H]
\begin{narrow}{-1cm}{-1cm}
\graphicsAI<1>[width=\linewidth]{gfx/scenario_mv.svg}%{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}
\end{frame}

\begin{frame}
\frametitle{DAS vs MVDR}
\framesubtitle{}
\vspace{-15pt}
\begin{figure}[H]
\begin{narrow}{-1cm}{-1cm}
\graphicsAI<1>[width=\linewidth]{gfx/plot_holmengraa.pdf}%{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}
\end{frame}


\begin{frame}
\frametitle{Beamforming}
\framesubtitle{The Minimum Variance beamformer}
\begin{figure}[H]
\begin{narrow}{-0.9cm}{-0.9cm}
\graphicsAI<1>[drawing,width=\linewidth]{gfx/beamforming_mv.svg} %{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}                                                                                                                                                                                                                                                                                                   
% Minimize the beamformers output power while maintaining unity gain in the look direction
% \begin{block}{The Minimum Variance (MV) Criterion}
% Minimize the beamformers output power while maintaining unity gain in the look direction
% % \todo[inline]{Use fancy figure to illustrate this. Fix the awful box layout.}
% \end{block}
% \begin{itemize}
% \item Dynamically \emph{computes} the window that fulfills the MV criterion
% \item Problems:
% \begin{itemize}
% \item Performance compromised by required robustification techniques\\
% E.g. Subarray averaging is needed to deal with coherent reflections $\Rightarrow$ makes the effective array smaller
% \item Large computational complexity of up to O(M$^3$), with $M$ being the number of channels
% \end{itemize}
% \end{itemize}
\end{frame}





\begin{frame}
\frametitle{MVDR}
\framesubtitle{Computational steps and complexity}\\
% \vspace{-15pt}
\begin{figure}[H]
\begin{narrow}{-1.9cm}{-1.9cm}
\graphicsAI<1>[drawing,width=\linewidth]{gfx/beamforming_mv_light.svg} %{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}
% {\small\vspace{-20pt}
% \begin{narrow}{-0.5cm}{-0.5cm}\centering
% \begin{align*}
% z[n] = \w\H[n]\x[n], \qquad\text{where}\qquad \vec w[n] = \frac{\Ri[n]\a}{\a\T\Ri[n]\a} \qquad\text{and}\qquad &\R = E\{\x[n]\x\H[n]\}
% \end{align*}
% \end{narrow}}
% \hspace{5pt}\begin{tabular}[t]{l l}
% \hspace{-10pt}\textbf{Computation steps (for each $n$)}: & \textbf{Complexity:} \\
% {\color{red}\textbf{1.}} $\R$ must be estimated. & O(M$^2$) \\
% {\color{red}\textbf{2.}} $\R^1\a = \vec b$ is found by solving $\R \b = \a$ for $\vec b$ & O(M$^3$) \\
% {\color{red}\textbf{3.}} $z[n]$ found by simple substitution & O(M)
% \end{tabular}
\vspace{-15pt}\textbf{But:}
\begin{itemize}
\item Each pixel in the image can be processed independently.
\item Maybe GPUs are better suited for the purpose?
\end{itemize}
% 
% \begin{minipage}[t]{0.75\linewidth}
% \textbf{Computation steps (for each $n$)}:
% \begin{enumerate}
% \item $\R$ must be estimated.
% \item $\R^1\a = \vec b$ is found by solving $\R \b = \a$ for $\vec b$
% \item Beamformer output is then found by simple substitution
% \end{enumerate}
% \end{minipage}%
% \begin{minipage}[t]{0.25\linewidth}
% \textbf{Complexity:}
% O(M$^2$) \\
% O(M$^3$) \\
% O(M)
% \end{minipage}
% \item Estimating $\R$ is a O(M$^2$) problem
% \item Solving $\R \b = \a$ for $\vec b$ is a O(M$^3$) problem
% \item Substitution steps: O(M)
% \end{itemize}
\end{frame}


% \begin{frame}
% \frametitle{MVDR}
% \framesubtitle{Estimating $\R$}
% \vspace{15pt}
% % An estimate $\eR$ of $\R$ can be computed as
% % \begin{align*}
% % \R = E\{\x[n]\x\H[n]\} = %\frac{1}{(2N_{\text{avg}}}\sumb{n'=n-Navg}{Navg}\sumb{k=0}{M-L+1} \x_k[n]\x_k\H[n]
% % \end{align*}
% \begin{itemize}
% \item Spatial (subarray) averaging to improve estimate
% \item Temporal averaging to improve speckle statistics
% \item Diagonal loading improve numerical conditioning
% \end{itemize}
% \end{frame}

\section{GPUs}

\begin{frame}
% \makeatletter%
% \special{pdf: put @thispage <</Group << /S /Transparency /I true /CS /DeviceRGB>> >>}%
% \makeatother%
\frametitle{GPUs for image reconstruction}
\framesubtitle{}
\vspace{-3pt}
\begin{figure}[H]
\begin{narrow}{0cm}{0cm}
\graphicsAI<1>[drawing,width=\linewidth]{gfx/gpus.svg}%{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}
\begin{itemize}
\item CPUs: Optimized for running \emph{a few} potentially complex threads, that may have \emph{complex} data dependencies.
\item GPUs: Optimized for running \emph{hundreds} of light-weight threads, with \emph{simple} data dependencies.
\end{itemize}
\end{frame}


\begin{frame}
\frametitle{Implementation}
\framesubtitle{MVDR on GPU}
\vspace{-15pt}
\begin{figure}[H]
\begin{narrow}{0cm}{0cm}
\graphicsAI<1>[drawing,width=\linewidth]{gfx/implementation.svg}%{../Docs/GeiloSrc/Figs/das.pdf}
\end{narrow}
\end{figure}
\begin{itemize}
\item TODO: Far from there yet. Not quote sure how to show this in an easy way... 
\end{itemize}
\end{frame}



% \begin{frame}
% \frametitle{Experimental Setup}
% \framesubtitle{HISAS 1030}
% \begin{figure}[H]
% \graphicsAI<1>[drawing,width=0.6\linewidth]{gfx/hisas_on_hugin.jpg} %{../Docs/GeiloSrc/Figs/das.pdf}
% \end{figure}
% \begin{itemize}
% \item High resolution interferometric SAS
% \item 2x32 element phased array transmitter/receiver
% \item Array length: 120cm
% \item Sampling frequency: 100kHz
% \item Opening angle: 15deg (TX), 23deg (RX)
% \end{itemize}
% \end{frame}

\section{Results}

\subsection{Benchmarks}

\begin{frame}
\frametitle{Results (benchmarks)}
\framesubtitle{}
% \vspace{-3pt}
\begin{itemize}
\item Test system: Intel Xeon quad core CPU, and a nVidia Gefore GTX480 GPU.
\end{itemize}
\begin{figure}[H]\centering
\graphicsAI<1>[drawing,width=0.7\linewidth]{gfx/benchmark.pdf}
\end{figure}
\vspace{-10pt}
\begin{itemize}
\item The GPU version $\approx$ 2 orders of magnitude faster than (plain) C.
\end{itemize}
\end{frame}


{
\setbeamertemplate{background}{\graphicsAI[width=\paperwidth]{gfx/use_case_sectorscan.svg}}%
\begin{frame}
\vspace{-80pt}\hspace{-25pt}
\frametitle{\color{white}Realtime requirements?}
\framesubtitle{\vspace{-10pt}\color{white}Realtime sectorscan imaging}
\vspace{100pt}\ 
% \begin{figure}[H]
% \begin{narrow}{-1.6cm}{-1.6cm}
% \graphicsAI<1>[drawing,width=\linewidth]{gfx/use_case_sectorscan3.svg}
% \end{narrow}
% \end{figure}   
\end{frame}
}

{
\setbeamertemplate{background}{\graphicsAI[width=\paperwidth]{gfx/use_case_sectorscan2.svg}}%
\begin{frame}
\vspace{-80pt}\hspace{-25pt}
\frametitle{\color{white}Realtime requirements?}
\framesubtitle{\vspace{-10pt}\color{white}Realtime sectorscan imaging}
\vspace{100pt}\ 
% \begin{figure}[H]
% \begin{narrow}{-1.6cm}{-1.6cm}
% \graphicsAI<1>[drawing,width=\linewidth]{gfx/use_case_sectorscan3.svg}
% \end{narrow}
% \end{figure}   
\end{frame}
}

{
\setbeamertemplate{background}{\graphicsAI[width=\paperwidth]{gfx/use_case_sectorscan3.svg}}%
\begin{frame}
\vspace{-80pt}\hspace{-25pt}
\frametitle{\color{white}Realtime requirements?}
\framesubtitle{\vspace{-10pt}\color{white}Realtime sectorscan imaging}
\vspace{100pt}\ 
% \begin{figure}[H]
% \begin{narrow}{-1.6cm}{-1.6cm}
% \graphicsAI<1>[drawing,width=\linewidth]{gfx/use_case_sectorscan3.svg}
% \end{narrow}
% \end{figure}   
\end{frame}
}


\begin{frame}
\frametitle{Realtime requirements?}
\framesubtitle{}
% \vspace{-3pt}
\begin{itemize}
\item Test system: Intel Xeon quad core CPU, and a nVidia Gefore GTX480 GPU.
\end{itemize}
\begin{figure}[H]\centering
\graphicsAI<1>[drawing,width=0.7\linewidth]{gfx/benchmark_tagged.pdf}
\end{figure}
\vspace{-10pt}
\begin{itemize}
\item Realtime sectorscan imaging possible for most several configurations.
\end{itemize}
\end{frame}
                                                                                                                                                                                                                                                                                               

{
\setbeamertemplate{background}{\graphicsAI[width=\paperwidth]{gfx/AUVenv.png}}%
\begin{frame}
\vspace{-25pt}\frametitle{\color{white}Conclusion}
\framesubtitle{}
\vspace{-5pt}\color{white}
\begin{itemize}
\item \color{white}GPUs are well suited to accelerate algorithms such as the MVDR beamformer
\item \color{white}Our GPU implementation of the MVDR beamformer
\begin{itemize}
\item \color{white}fully supports active sonar systems,
\item \color{white}easily outperforms CPU implementations, and
\item \color{white}runs fast enough to support realtime sectorscan imaging.
\end{itemize}
\end{itemize}
\vfill
\textbf{\color{black}Acknowledgements}:
\begin{itemize}
\item Thanks to nVidia for providing us their unofficial batch solver
\end{itemize}
\end{frame}
}

% \begin{frame}
% \frametitle{Positron Emission Tomography}
% \framesubtitle{Advantages \& Disadvantages}
% \begin{columns}\begin{column}{0.5\linewidth}
% \begin{block}{Advantages}
% \begin{itemize}
% \item High quality metabolic information %High level soft-tissue detail
%   \note{Since the radiotracer can be designed to probe into specific biological processes. High spatial resolution and contrast. Mention e.g. cancer, biological activity}
% \item Information on biologic activity used to diagnose cardiovascular and neurological diseases, and cancer
% \item Non-invasive
%   \note{Allows the body to act as its own control}
% \end{itemize}
% \end{block}
% \end{column}\begin{column}{0.5\linewidth}
% \begin{block}{Disadvantages}
% \begin{itemize}
% \item Moderate radiation exposure
%   \note{A patient can only undergo treatment a few times}
% \item Expensive

% \vspace{-25pt}
% \end{frame}
% 
%

{
\setbeamertemplate{background}{\graphicsAI[width=\paperwidth]{gfx/AUVenv.png}}%
\begin{frame}
\vspace{-15pt}\frametitle{\color{white}Conclusion}
\framesubtitle{}
\vspace{-5pt}\color{white}
\begin{itemize}
\item \color{white}GPUs are well suited to accelerate algorithms such as the MVDR beamformer
\item \color{white}Our GPU implementation of the MVDR beamformer
\begin{itemize}
\item \color{white}fully supports active sonar systems,
\item \color{white}easily outperforms CPU implementations, and
\item \color{white}runs fast enough to support realtime sectorscan imaging.
\end{itemize}
\end{itemize}
\begin{figure}[H]%[width=0.5\linewidth]
\graphicsAI<1>[width=0.3\linewidth]{gfx/happy_fish.png}\\
\color{black}\centering\LARGE\textbf{Questions?}
\end{figure}
% \vspace{-10pt}
\end{frame}
}

% \begin{frame}
% \frametitle{}
% \framesubtitle{}
% 
% \begin{figure}[H]%[width=0.5\linewidth]
% \graphicsAI<1>[width=0.3\linewidth]{gfx/happy_fish.png}
% \end{figure}
% \vspace{-10pt}
% \centering\LARGE\textbf{Questions?}
% 
% \end{frame}



\end{document}




% \documentclass[
%   ucs,
%   utf8
%   12pt,                   %extsize
%   draft,                  %for empty decorations
%     hyperref={
%       breaklinks=true,      %Break links when necessary
%       linktocpage=true,     %Enable link to page?
%       linkcolor=PineGreen,  %Colour of links to labels within document
%       citecolor=Brown,      %Colour of links to the biliography
%       filecolor=Red,        %Colour of links to local files
%       pagecolor=Red,        %Colour of links to other pages withing document
%       urlcolor=Blue,        %Colour of the links to external URLs
%       colorlinks=true,      %??
%       plainpages=false,     %Store roman/arabic numbering differently to avoid
%       bookmarksnumbered
%     },                      %``duplicate'' warning.
% %   usepdftitle={},         %
%     xcolor={
%       table,                %For colour in tabulars (will pull in colortbl)
%       dvipsnames,
%       svgnames
%     }
%   c,                      %centered
%   t,                      %top aligned
%   compress,               %
%   trans,                  %
%   noamsthm,               %
%   notheorems,             %
%   envcountsec,            %
%   ignoreonframetext,      %
%   handout,                %
%   notes={}                %
% ]{beamer}