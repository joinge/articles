% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margin=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} % support the \includegraphics command and options
\usepackage{xcolor}
% \usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...
\usepackage{amsmath}

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

\usepackage{url}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

\newcommand\T{^{\scriptscriptstyle T}}
\renewcommand\H{^{\scriptscriptstyle H}}

\renewcommand\vec[1]{\boldsymbol{#1}}
\newcommand\mat[1]{\boldsymbol{#1}}

\newcommand\Om{O_\text{m}}
\newcommand\Oa{O_\text{a}}
\newcommand\Nl{N_\text{l}}
\newcommand\Nk{N_\text{k}}
\newcommand\1{\vec 1}
\newcommand\I{\mat I}
\renewcommand*\a{\vec a}
\renewcommand*\i{\vec i}
\renewcommand*\k{\vec k}
\newcommand*\n{\vec n}
\newcommand*\p{\vec p}
\newcommand*\s{\vec s}
\newcommand*\w{\vec w}
\newcommand*\x{\vec x}
\newcommand*\y{\vec y}

\newcommand*\A{\mat A}
\newcommand*\B{\mat B}
\newcommand*\C{\mat C}
\newcommand*\E{\mat E}
% \renewcommand*\H{\mat H}
\renewcommand*\P{\mat P}
\newcommand*\eP{\mat{\hat P}}
\newcommand*\R{\mat R}
\newcommand*\Ri{\R^{-1}}
\newcommand*\eR{\mat{\hat R}}
\newcommand*\eRi{\hat{\mat R}\;\!^{-1}}
\newcommand*\Navg{N_\text{avg}}
\newcommand*\W{\mat W}
\newcommand*\X{\mat X}
\newcommand*\Xd{\X_{\!\Delta}}
\newcommand*\Y{\mat Y}

\renewcommand*\L{\mat \Lambda}
\newcommand*\U{\mat U}
% \renewcommand*\t{\mathtiny{^T}}
% \newcommand*\h{\mathtiny{^H}}
\renewcommand*\t{^T}
\newcommand*\h{^H}

\newcommand\D{\vec\nabla} %Del: Vector differential operator - nabla
\newcommand\Dx{\vec\nabla\times}
\newcommand\Dd{\vec\nabla\cdot}

\newcommand\q[1]{\textit{#1}}
\newcommand\qi[1]{\item\q{#1}}
\newcommand\hi[1]{\item[\textbf{#1}]}
\newcommand\ans[1]{#1}
\newcommand\ai[1]{\\[.5\baselineskip]\ans{#1}}

\begin{document}
% \maketitle

\begin{center}\Large\bf
Author's response to the reviewer's comments
\end{center}

\begin{center}
\begin{tabular}{l p{.6\linewidth}}\centering
Manuscript number: & 2015JOE001805 \\
Title: & Low Complexity Adaptive Sonar Imaging \\
Authors: & Buskenes,~J.I., Hansen,~R.E., Austeng,~A.
\end{tabular}
\end{center}

We would like to thank the associate editor for his efforts and for his speedy replies to queries from the authors, and reviewers for their thorough and highly relevant comments. Subsequent sections will target each reviewer's comments in detail. We quote in \textit{italic} statements from the reviewers, and provide our replies in ordinary print, 


\newpage
\section{Answer to reviewer 1}

\subsection*{General}

\q{The paper is well written and addresses an actual problem. The solution however, is barely innovative. Still the results are interesting enough for publication. Some minors details.} \\\\
\ans{We appreciate the reviewer's view and would like to thank him for this time and patience reviewing this article.}

\subsection*{Specifics}

\begin{enumerate}
% \emph{General}
\hi{Introduction}
\qi{The authors show no evidence that bats use adaptive processing, remove this example.}
\ai{The reviewer makes a good point, this may not have been obvious. We have provided a reference for the adaptive processing used by bats, but would prefer to keep the example if possible.}
%
\qi{It is not clear whether LCA is really an adaptive method that adapts weights on the fly or a method that a posteriori decides which window shows best results.}
\ai{We appreciate the remark. We are using a system level definition of adaptivity that includes any kind of dynamic and data dependent behaviour, hence feel that both beamformers fall in that category. Both methods process the pixels in a data dependent manner, resulting in non linear image. We have tried to express it clearer that the LCA solution space is merely a sampled version of that of MVDR, hence can not be considered fully adaptive such as MVDR (although this, too, is heavily constrained).}
%
\qi{The use of non-SI units like cm is discouraged.}
\ai{We agree that non-SI units should be avoided, however had the belief that cm being a prefixed SI unit was valid? In the IEEE Styles Manual this unit is used several times as an example: 
\url{http://www.ieee.org/publications_standards/publications/journmag/online_style_manual-10292015.pdf} (e.g. on page 24 paragraph ``The En, Em, or Two-Em Dash'', and several times on page 25 paragraph ``Math'' bullet point 16). Will leave this as is for now pending any objections?}
%
\end{enumerate}


\newpage
\section{Answer to reviewer 3}

\subsection*{General}

\q{Although the topic is potentially interesting for all readers, due to many specific terms used in the text, in the present form the article would probably only be highly appreciated by expert readers. I would recommend some minor changes in order to widen the frame of potential readers.}

\ans{We thank the reviewer for the thorough review and very constructive remarks. We believe in this philosophy and attempt to make changes accordingly.}

\subsection*{Specific points}

\begin{enumerate}
% \emph{General}
\hi{Abstract}
\qi{"the array's spatial covariance matrix" might be a bit shocking for the non-expert Reader --> The formulation in the Introduction might fit better "the incluence of noise ..."}
\ai{This is a good point. We have reformulated the sentence to speak of computing the spatial statistics instead.}
%
\hi{Page 2}
\qi{"6 of which were micro-steered" --> a short explanation or reference might help to understand what is meant by "micro-steered"}
\ai{Another good point. This wording is now changed and a sentence elaborating on its meaning is added.}
%
\qi{"it was not clear how how many" --> delete 1 x "how"}
\ai{Thank you. Corrected.}
%
\qi{"with an element beamwidth" --> what is meant by element beamwidth? Maybe an additional figure could be used to explain this.}
\ai{Good remark. We meant the -3dB opening angle of the elements on transmit. Changes made to reflect this.}
%
\hi{Page 3, after (1)}
\qi{"Applying a window that trails off .... Minimum variance distortion-less response (MVDR) beamformer."--> real and complex Windows? The introduction should be more formal: x ist introduced as delayed data, weights or delays to change, or both is explained later. --> The difference between noise and sidelobes should be pointed out.}
\ai{}
%
\hi{Page 5, equation (5)}
\qi{The lateral correlation and the reason why equation (5) is a good choice should be better explained.}
\ai{Indeed it should, this paragraph is now rewritten.}
%
\hi{Page 6, last row}
\qi{"they are optimal for any value" --> optimal in which sense?}
\ai{Thank you. This was mentioned earlier in the same paragraph, just after (8).}
%
\hi{Fig 3}
\qi{why is a 40x40 pixel group a good choice? could the associated broadside direction be made visible in the figure, too?}
\ai{This is an excellent question. This should perhaps be related to the detail level in the image, which in turn depends on the array's imaging performance.}
%
\hi{Page 8}
\qi{reference to Fig.1 --> could the sequence of figures be changes to have Fig. 1 closer to this paragraph}
\ai{Valid point. In our two column print the figure is on the page before its first reference. }
%
\hi{Page 11}
\qi{where is the synthetic aperture needed/applied in this work, or is it just the name of the array? how does the work on LCA/MVDR Change the Quality of synthetic aperture?
what exactly is the sectorscan mode?}
\ai{Thank you, we see that our formulation should be clarified. We are creating an image of the sector highlighted by a single ping of data (sectorscan), but are using data recorded by a synthetic aperture sonar (SAS). We mention it since SAS systems have a wide transmit beam intended to highlight multiple pings and thus does not produce the best sectorscan images.}
%
\end{enumerate}



\subsection*{Suggestions for improving the exposition of the processing}



\newpage

\section{Figure changes}

\begin{enumerate}
\item Fig 8 is new. It was added to provide details on how the steering bound $\phi_\mathrm{3dB}$ is affected by the number of elements $M$ and the element spacing relative to the wavelength $\frac{d}{\lambda}$.
\end{enumerate}


\section{Other changes}

The steering bound $\phi_\mathrm{3dB}$ depends on not just $\beta$, but also on the number of elements $M$ and the element spacing relative to the wavelength $\frac{d}{\lambda}$.
\begin{enumerate}
\item We have supplied additional info on how the steering is affected by these parameters in appendix C.
\item Equations (12) and (14) only gave the correct results for our system configuration, and were not very intuitive. Appendix C now replace and extends these equations, and we removed them in hope this will make the article easier to read.
\end{enumerate}


% 
% 
% 
% Describe how models should be loaded. Framework and formate etc.
% 
% \section{Calculation by Rasterization}
% \subsection{From 3D Models to Rasterized Points}\label{sec:modelsToPoints}
% The 3D models and sea floor has to be rasterized on to a view plane in order to calculate output intensity using CUDA.
% 
% We plan to use openGL to construct depth and reflection coefficient buffers at each along-track position. For this we need to set up a camera in a scene that mimic the sonar array imaging objects on a sea floor. The output from this step is a depth and a reflection coefficient buffer for each along-track position. Investigation has to be done to see if information is redundant along the track. We might also need to calculate per-pixel normals for use in the next step.
% 
% \subsection{Calculating Intensity}\label{sec:calcIntensity}
% For each pixel, load normal, range, and reflection coefficient. Calculating the contribution from this location is then done by calculating the reciprocal doubled range, and weight it with the reflection coefficient and the normal component towards the along-track position. Saving these calculations to a buffer, we can now find the slant-range pixel by summing all values closer than half the sampling distance for the given slant-range value.
% 
% \subsection{Parallel Design Pattern for the GPU}
% It is natural that we loop over along-track positions. At each position we generate the listed buffers in Section \ref{sec:modelsToPoints} and holds them in GPU memory. The buffers is then fed to a custom CUDA kernel that calculates the reflected intensity per buffer location. All buffers should be placed in texture memory so that resolution can be adjusted at any step. If we render each buffer listed in Section \ref{sec:modelsToPoints} at resolution $M \times N$, the step in Section \ref{sec:calcIntensity} can easily be rendered at $2M \times 2N$ by interpolation. Finally we arrive to what is believed to be the less parallel part of this approach, the sum operation. A kernel has to be launched that for each slant-range accumulates the total contribution in the given intensity buffer. We might want to use a library kernel for this if it exist. If we are going to code this step, one idea could be as follow: Assign a region to a block of treads, find min and max, and let one thread search for one ore more 
% slant-range values\footnote{Need to do some more thinking here}.
% 
% \subsection{Concluding Remarks}
% Uses a lot of memory, many calculations. Flexible. Will support point-based objects and sea floor out of the box. 
% 
% \section{Geometric Calculation of Output Intensity}
% Inspired by the Field II ultrasound simulator, where array responses are found by considering geometry, the same concept can be used for reflection off object geometry. Geometry in our case can be viewed as arrays, where the emitted energy is reflected energy from a point source at the along-track position.
% 
% Given a list of triangle patches, were the three corners of each triangle has a corresponding reflection coefficient, normal and position/depth, the reflection intensity can be found by simple geometric considerations. First we should sort triangles in depth, so that GPU-threads in a block, process vertices that are close to each other in range. This to maximize throughput of writing to global memory. One thread loads a triangle and iterates from min to max depth using the slant-range sampling distance as step length. For each step the thread calculates the intersection between the triangle and a sphere with radius given by the current depth. The intersection length is weighted with both the reciprocal depth, the reflection coefficient and the triangle normal \footnote{We should only use triangles with equal normals in each corner. Hence they are all equal to the average triangle normal. Might not be compliant.}.
% 
% \subsection{Concluding Remarks}
% Uses little memory, few calculations. Will not support point-based objects and sea floor out of the box. 


\end{document}
